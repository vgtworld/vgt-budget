<ui:composition xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" template="/WEB-INF/templates/basic.xhtml">
    <ui:define name="pageTitle">Create receipt</ui:define>
    <ui:define name="content">
        <h2 class="text-center">Create new receipt</h2>

        <div class="container-fluid col-lg-6">

            <div class="bubble">
                <h3>Store</h3>
                <h:panelGroup rendered="#{!empty receiptCreateController.receipt.store}">
                    <table>
                        <tr>
                            <th>Name:</th>
                            <td>#{receiptCreateController.receipt.store.name}</td>
                        </tr>
                        <tr>
                            <th>City:</th>
                            <td>#{receiptCreateController.receipt.store.city}</td>
                        </tr>
                        <tr>
                            <th>Address:</th>
                            <td>#{receiptCreateController.receipt.store.address}</td>
                        </tr>
                    </table>
                    <h:form>
                        <h:commandButton styleClass="btn btn-default" action="#{receiptCreateController.removeStoreFromReceipt}" value="Choose different store"/>
                    </h:form>
                </h:panelGroup>
                <h:panelGroup rendered="#{empty receiptCreateController.receipt.store}">
                    <div class="alert alert-danger">
                        Store not selected.
                    </div>
                </h:panelGroup>
            </div>

            <h:form styleClass="bubble">
                <h3>Products</h3>
                <table class="table">
                    <tr>
                        <th>Name</th>
                        <th class="text-right">Amount</th>
                        <th class="text-right">Unit price</th>
                        <th class="text-right">Total price</th>
                    </tr>
                    <ui:repeat value="#{receiptCreateController.receipt.products}" varStatus="loop">
                        <tr>
                            <td>#{receiptCreateController.receipt.products[loop.index].name}</td>
                            <td class="text-right">
                                <h:inputText styleClass="form-control" value="#{receiptCreateController.receipt.products[loop.index].amount}"/>
                            </td>
                            <td class="text-right">
                                <h:inputText styleClass="form-control" value="#{receiptCreateController.receipt.products[loop.index].pricePerUnit}"/>
                            </td>
                            <td class="text-right">#{receiptCreateController.receipt.products[loop.index].totalPrice}</td>
                        </tr>
                    </ui:repeat>
                    <ui:repeat value="#{receiptCreateController.receipt.products}" var="product">
                    </ui:repeat>
                </table>
                <h:panelGroup rendered="#{empty receiptCreateController.receipt.products}">
                    <div class="alert alert-danger">
                        No product added.
                    </div>
                </h:panelGroup>
                <div class="form-group">
                    <h:commandButton styleClass="btn btn-default" value="Recalculate" type="submit" action="#{receiptCreateController.refreshReceiptForm()}"/>
                </div>
            </h:form>

        </div>

        <h:panelGroup rendered="#{empty receiptCreateController.receipt.store}">
            <div class="bubble container-fluid col-lg-6">
                <ui:include src="/WEB-INF/snippets/receipt/choose-store-form.xhtml"/>
            </div>
        </h:panelGroup>
        <div class="bubble container-fluid col-lg-6">
            <ui:include src="/WEB-INF/snippets/receipt/choose-product-form.xhtml"/>
        </div>
    </ui:define>
</ui:composition>